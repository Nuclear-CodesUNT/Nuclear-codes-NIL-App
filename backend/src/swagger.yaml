openapi: 3.0.0
info:
  title: NIL App API
  version: 1.0.0
  description: API documentation for the NIL (Name, Image, Likeness) Application
servers:
  - url: http://localhost:4000/api
    description: Development server
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: connect.sid
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
          format: email
        role:
          type: string
          enum: [athlete, brand, lawyer, coach, admin]
paths:
  /auth/signup:
    post:
      summary: Register a new user
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - email
                - password
                - role
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
                role:
                  type: string
                  enum: [athlete, brand, lawyer, coach, admin]
                school:
                  type: string
                  description: Required if role is athlete or coach
                currentYear:
                  type: string
                  description: Required if role is athlete
                sport:
                  type: string
                  description: Required if role is athlete or coach
                position:
                  type: string
                  description: Required if role is athlete
                barNumber:
                  type: string
                  description: Required if role is lawyer
                state:
                  type: string
                  description: Required if role is lawyer
                yearsOfExperience:
                  type: number
                  description: Required if role is lawyer
      responses:
        201:
          description: User created successfully
        400:
          description: Bad request (missing fields or user exists)
        500:
          description: Internal server error
  /auth/login:
    post:
      summary: Login user
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
      responses:
        200:
          description: Login successful
        400:
          description: Missing credentials
        401:
          description: Invalid credentials
        500:
          description: Internal server error
  /auth/logout:
    post:
      summary: Logout user
      tags: [Auth]
      security:
        - cookieAuth: []
      responses:
        200:
          description: Logged out successfully
        500:
          description: Logout failed
  /auth/me:
    get:
      summary: Get current logged in user
      tags: [Auth]
      security:
        - cookieAuth: []
      responses:
        200:
          description: Current user info
        401:
          description: Not authenticated
        404:
          description: User not found
        500:
          description: Internal server error
